{"ast":null,"code":"var _jsxFileName = \"/Users/patocskaierik/Desktop/task-manager/task-manager/frontend/src/EditTask.js\",\n    _s = $RefreshSig$();\n\nimport { fetchMarketById, updateMarket } from \"components/Service\";\nimport { useMutation, useQuery } from \"react-query\";\nimport { Navigate, useNavigate, useParams } from \"react-router-dom\";\nimport { MarketInput } from \"./Market\";\nimport MarketForm from \"./MarketForm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst EditTask = () => {\n  _s();\n\n  var _useParams$id;\n\n  const navigate = useNavigate();\n  const id = (_useParams$id = useParams().id) !== null && _useParams$id !== void 0 ? _useParams$id : \"\";\n  const marketQuery = useQuery(\"task\", () => fetchTaskById(id), {\n    cacheTime: 0\n  });\n  const editTaskMutation = useMutation(TaskInput => updateTask(task, id), {\n    onSuccess: () => navigate(\"/feladatok\")\n  });\n\n  const submitForm = market => editMarketMutation.mutate(market);\n\n  if (!id) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/piac\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 12\n    }, this);\n  }\n\n  const {\n    isLoading,\n    isIdle,\n    isError\n  } = marketQuery;\n\n  if (isLoading || isIdle) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: \"Bet\\xF6lt\\xE9s...\"\n    }, void 0, false);\n  }\n\n  if (isError) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: \"Hiba t\\xF6rt\\xE9nt a piac bet\\xF6lt\\xE9se sor\\xE1n!\"\n    }, void 0, false);\n  }\n\n  const market = marketQuery.data;\n  const defaultValues = { ...market,\n    vendors: market.vendors.map(vendor => vendor.id)\n  };\n  return /*#__PURE__*/_jsxDEV(MarketForm, {\n    title: \"Piac m\\xF3dos\\xEDt\\xE1sa\",\n    submitLabel: \"M\\xF3dos\\xEDt\\xE1s\",\n    hasError: editMarketMutation.isError,\n    errorMessage: \"Nem siker\\xFClt a piacot m\\xF3dos\\xEDtani!\",\n    onSubmit: submitForm,\n    defaultValues: defaultValues\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n};\n\n_s(EditTask, \"Yi9JhNWnhOXzOJTFfydOU4i9YY4=\", false, function () {\n  return [useNavigate, useParams, useQuery, useMutation];\n});\n\n_c = EditTask;\nexport default EditTask;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditTask\");","map":{"version":3,"sources":["/Users/patocskaierik/Desktop/task-manager/task-manager/frontend/src/EditTask.js"],"names":["fetchMarketById","updateMarket","useMutation","useQuery","Navigate","useNavigate","useParams","MarketInput","MarketForm","EditTask","navigate","id","marketQuery","fetchTaskById","cacheTime","editTaskMutation","TaskInput","updateTask","task","onSuccess","submitForm","market","editMarketMutation","mutate","isLoading","isIdle","isError","data","defaultValues","vendors","map","vendor"],"mappings":";;;AAAA,SAASA,eAAT,EAA0BC,YAA1B,QAA8C,oBAA9C;AACA,SAASC,WAAT,EAAsBC,QAAtB,QAAsC,aAAtC;AACA,SAASC,QAAT,EAAmBC,WAAnB,EAAgCC,SAAhC,QAAiD,kBAAjD;AACA,SAASC,WAAT,QAA4B,UAA5B;AACA,OAAOC,UAAP,MAAuB,cAAvB;;;;AAEA,MAAMC,QAAQ,GAAG,MAAM;AAAA;;AAAA;;AACrB,QAAMC,QAAQ,GAAGL,WAAW,EAA5B;AAEA,QAAMM,EAAE,oBAAGL,SAAS,GAAGK,EAAf,yDAAqB,EAA7B;AAEA,QAAMC,WAAW,GAAGT,QAAQ,CAAC,MAAD,EAAS,MAAMU,aAAa,CAACF,EAAD,CAA5B,EAAkC;AAC5DG,IAAAA,SAAS,EAAE;AADiD,GAAlC,CAA5B;AAIA,QAAMC,gBAAgB,GAAGb,WAAW,CAAEc,SAAD,IAAeC,UAAU,CAACC,IAAD,EAAOP,EAAP,CAA1B,EAAsC;AACxEQ,IAAAA,SAAS,EAAE,MAAMT,QAAQ,CAAC,YAAD;AAD+C,GAAtC,CAApC;;AAIA,QAAMU,UAAU,GAAIC,MAAD,IAAyBC,kBAAkB,CAACC,MAAnB,CAA0BF,MAA1B,CAA5C;;AAEA,MAAI,CAACV,EAAL,EAAS;AACP,wBAAO,QAAC,QAAD;AAAU,MAAA,EAAE,EAAC,OAAb;AAAqB,MAAA,OAAO;AAA5B;AAAA;AAAA;AAAA;AAAA,YAAP;AACD;;AAED,QAAM;AAAEa,IAAAA,SAAF;AAAaC,IAAAA,MAAb;AAAqBC,IAAAA;AAArB,MAAiCd,WAAvC;;AAEA,MAAIY,SAAS,IAAIC,MAAjB,EAAyB;AACvB,wBAAO;AAAA;AAAA,qBAAP;AACD;;AAED,MAAIC,OAAJ,EAAa;AACX,wBAAO;AAAA;AAAA,qBAAP;AACD;;AAED,QAAML,MAAM,GAAGT,WAAW,CAACe,IAA3B;AAEA,QAAMC,aAA0B,GAAG,EACjC,GAAGP,MAD8B;AAEjCQ,IAAAA,OAAO,EAAER,MAAM,CAACQ,OAAP,CAAeC,GAAf,CAAoBC,MAAD,IAAYA,MAAM,CAACpB,EAAtC;AAFwB,GAAnC;AAKA,sBACE,QAAC,UAAD;AACE,IAAA,KAAK,EAAC,0BADR;AAEE,IAAA,WAAW,EAAC,oBAFd;AAGE,IAAA,QAAQ,EAAEW,kBAAkB,CAACI,OAH/B;AAIE,IAAA,YAAY,EAAC,4CAJf;AAKE,IAAA,QAAQ,EAAEN,UALZ;AAME,IAAA,aAAa,EAAEQ;AANjB;AAAA;AAAA;AAAA;AAAA,UADF;AAUD,CA9CD;;GAAMnB,Q;UACaJ,W,EAENC,S,EAESH,Q,EAIKD,W;;;KATrBO,Q;AAgDN,eAAeA,QAAf","sourcesContent":["import { fetchMarketById, updateMarket } from \"components/Service\";\nimport { useMutation, useQuery } from \"react-query\";\nimport { Navigate, useNavigate, useParams } from \"react-router-dom\";\nimport { MarketInput } from \"./Market\";\nimport MarketForm from \"./MarketForm\";\n\nconst EditTask = () => {\n  const navigate = useNavigate();\n\n  const id = useParams().id ?? \"\";\n\n  const marketQuery = useQuery(\"task\", () => fetchTaskById(id), {\n    cacheTime: 0\n  });\n\n  const editTaskMutation = useMutation((TaskInput) => updateTask(task, id), {\n    onSuccess: () => navigate(\"/feladatok\")\n  });\n\n  const submitForm = (market: MarketInput) => editMarketMutation.mutate(market);\n\n  if (!id) {\n    return <Navigate to=\"/piac\" replace />;\n  }\n\n  const { isLoading, isIdle, isError } = marketQuery;\n\n  if (isLoading || isIdle) {\n    return <>Betöltés...</>;\n  }\n\n  if (isError) {\n    return <>Hiba történt a piac betöltése során!</>;\n  }\n\n  const market = marketQuery.data;\n\n  const defaultValues: MarketInput = {\n    ...market,\n    vendors: market.vendors.map((vendor) => vendor.id)\n  };\n\n  return (\n    <MarketForm\n      title=\"Piac módosítása\"\n      submitLabel=\"Módosítás\"\n      hasError={editMarketMutation.isError}\n      errorMessage=\"Nem sikerült a piacot módosítani!\"\n      onSubmit={submitForm}\n      defaultValues={defaultValues}\n    />\n  );\n};\n\nexport default EditTask;\n"]},"metadata":{},"sourceType":"module"}