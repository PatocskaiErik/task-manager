{"ast":null,"code":"var _jsxFileName = \"/Users/patocskaierik/Desktop/task-manager/task-manager/frontend/src/EditTask.js\",\n    _s = $RefreshSig$();\n\nimport { fetchMarketById, updateMarket } from \"components/Service\";\nimport { useMutation, useQuery } from \"react-query\";\nimport { Navigate, useNavigate, useParams } from \"react-router-dom\";\nimport { MarketInput } from \"./Market\";\nimport MarketForm from \"./MarketForm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst EditTask = () => {\n  _s();\n\n  var _useParams$id;\n\n  const navigate = useNavigate();\n  const id = (_useParams$id = useParams().id) !== null && _useParams$id !== void 0 ? _useParams$id : \"\";\n  const marketQuery = useQuery(\"task\", () => fetchMarketById(id), {\n    cacheTime: 0\n  });\n  const editMarketMutation = useMutation(market => updateMarket(market, id), {\n    onSuccess: () => navigate(\"/piac\")\n  });\n\n  const submitForm = market => editMarketMutation.mutate(market);\n\n  if (!id) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/piac\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 12\n    }, this);\n  }\n\n  const {\n    isLoading,\n    isIdle,\n    isError\n  } = marketQuery;\n\n  if (isLoading || isIdle) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: \"Bet\\xF6lt\\xE9s...\"\n    }, void 0, false);\n  }\n\n  if (isError) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: \"Hiba t\\xF6rt\\xE9nt a piac bet\\xF6lt\\xE9se sor\\xE1n!\"\n    }, void 0, false);\n  }\n\n  const market = marketQuery.data;\n  const defaultValues = { ...market,\n    vendors: market.vendors.map(vendor => vendor.id)\n  };\n  return /*#__PURE__*/_jsxDEV(MarketForm, {\n    title: \"Piac m\\xF3dos\\xEDt\\xE1sa\",\n    submitLabel: \"M\\xF3dos\\xEDt\\xE1s\",\n    hasError: editMarketMutation.isError,\n    errorMessage: \"Nem siker\\xFClt a piacot m\\xF3dos\\xEDtani!\",\n    onSubmit: submitForm,\n    defaultValues: defaultValues\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n};\n\n_s(EditTask, \"FD8UwX6A9y+7LEplEcVE6DdOhU4=\", false, function () {\n  return [useNavigate, useParams, useQuery, useMutation];\n});\n\n_c = EditTask;\nexport default EditTask;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditTask\");","map":{"version":3,"sources":["/Users/patocskaierik/Desktop/task-manager/task-manager/frontend/src/EditTask.js"],"names":["fetchMarketById","updateMarket","useMutation","useQuery","Navigate","useNavigate","useParams","MarketInput","MarketForm","EditTask","navigate","id","marketQuery","cacheTime","editMarketMutation","market","onSuccess","submitForm","mutate","isLoading","isIdle","isError","data","defaultValues","vendors","map","vendor"],"mappings":";;;AAAA,SAASA,eAAT,EAA0BC,YAA1B,QAA8C,oBAA9C;AACA,SAASC,WAAT,EAAsBC,QAAtB,QAAsC,aAAtC;AACA,SAASC,QAAT,EAAmBC,WAAnB,EAAgCC,SAAhC,QAAiD,kBAAjD;AACA,SAASC,WAAT,QAA4B,UAA5B;AACA,OAAOC,UAAP,MAAuB,cAAvB;;;;AAEA,MAAMC,QAAQ,GAAG,MAAM;AAAA;;AAAA;;AACrB,QAAMC,QAAQ,GAAGL,WAAW,EAA5B;AAEA,QAAMM,EAAE,oBAAGL,SAAS,GAAGK,EAAf,yDAAqB,EAA7B;AAEA,QAAMC,WAAW,GAAGT,QAAQ,CAAC,MAAD,EAAS,MAAMH,eAAe,CAACW,EAAD,CAA9B,EAAoC;AAC9DE,IAAAA,SAAS,EAAE;AADmD,GAApC,CAA5B;AAIA,QAAMC,kBAAkB,GAAGZ,WAAW,CACnCa,MAAD,IAAyBd,YAAY,CAACc,MAAD,EAASJ,EAAT,CADD,EAEpC;AACEK,IAAAA,SAAS,EAAE,MAAMN,QAAQ,CAAC,OAAD;AAD3B,GAFoC,CAAtC;;AAOA,QAAMO,UAAU,GAAIF,MAAD,IAAyBD,kBAAkB,CAACI,MAAnB,CAA0BH,MAA1B,CAA5C;;AAEA,MAAI,CAACJ,EAAL,EAAS;AACP,wBAAO,QAAC,QAAD;AAAU,MAAA,EAAE,EAAC,OAAb;AAAqB,MAAA,OAAO;AAA5B;AAAA;AAAA;AAAA;AAAA,YAAP;AACD;;AAED,QAAM;AAAEQ,IAAAA,SAAF;AAAaC,IAAAA,MAAb;AAAqBC,IAAAA;AAArB,MAAiCT,WAAvC;;AAEA,MAAIO,SAAS,IAAIC,MAAjB,EAAyB;AACvB,wBAAO;AAAA;AAAA,qBAAP;AACD;;AAED,MAAIC,OAAJ,EAAa;AACX,wBAAO;AAAA;AAAA,qBAAP;AACD;;AAED,QAAMN,MAAM,GAAGH,WAAW,CAACU,IAA3B;AAEA,QAAMC,aAA0B,GAAG,EACjC,GAAGR,MAD8B;AAEjCS,IAAAA,OAAO,EAAET,MAAM,CAACS,OAAP,CAAeC,GAAf,CAAoBC,MAAD,IAAYA,MAAM,CAACf,EAAtC;AAFwB,GAAnC;AAKA,sBACE,QAAC,UAAD;AACE,IAAA,KAAK,EAAC,0BADR;AAEE,IAAA,WAAW,EAAC,oBAFd;AAGE,IAAA,QAAQ,EAAEG,kBAAkB,CAACO,OAH/B;AAIE,IAAA,YAAY,EAAC,4CAJf;AAKE,IAAA,QAAQ,EAAEJ,UALZ;AAME,IAAA,aAAa,EAAEM;AANjB;AAAA;AAAA;AAAA;AAAA,UADF;AAUD,CAjDD;;GAAMd,Q;UACaJ,W,EAENC,S,EAESH,Q,EAIOD,W;;;KATvBO,Q;AAmDN,eAAeA,QAAf","sourcesContent":["import { fetchMarketById, updateMarket } from \"components/Service\";\nimport { useMutation, useQuery } from \"react-query\";\nimport { Navigate, useNavigate, useParams } from \"react-router-dom\";\nimport { MarketInput } from \"./Market\";\nimport MarketForm from \"./MarketForm\";\n\nconst EditTask = () => {\n  const navigate = useNavigate();\n\n  const id = useParams().id ?? \"\";\n\n  const marketQuery = useQuery(\"task\", () => fetchMarketById(id), {\n    cacheTime: 0\n  });\n\n  const editMarketMutation = useMutation(\n    (market: MarketInput) => updateMarket(market, id),\n    {\n      onSuccess: () => navigate(\"/piac\")\n    }\n  );\n\n  const submitForm = (market: MarketInput) => editMarketMutation.mutate(market);\n\n  if (!id) {\n    return <Navigate to=\"/piac\" replace />;\n  }\n\n  const { isLoading, isIdle, isError } = marketQuery;\n\n  if (isLoading || isIdle) {\n    return <>Betöltés...</>;\n  }\n\n  if (isError) {\n    return <>Hiba történt a piac betöltése során!</>;\n  }\n\n  const market = marketQuery.data;\n\n  const defaultValues: MarketInput = {\n    ...market,\n    vendors: market.vendors.map((vendor) => vendor.id)\n  };\n\n  return (\n    <MarketForm\n      title=\"Piac módosítása\"\n      submitLabel=\"Módosítás\"\n      hasError={editMarketMutation.isError}\n      errorMessage=\"Nem sikerült a piacot módosítani!\"\n      onSubmit={submitForm}\n      defaultValues={defaultValues}\n    />\n  );\n};\n\nexport default EditTask;\n"]},"metadata":{},"sourceType":"module"}